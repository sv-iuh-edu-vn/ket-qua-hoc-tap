<!DOCTYPE html><html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kết quả học tập</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f5f7fb;margin:0;padding:20px}
    h1{color:#1f4fd8}
    h2{margin-top:30px;color:#333}
    table{width:100%;border-collapse:collapse;margin-top:10px;background:#fff}
    th,td{border:1px solid #ddd;padding:6px;text-align:center;font-size:13px}
    th{background:#eef2ff}
    td.left{text-align:left}
    .summary{margin:10px 0 20px 0;font-size:14px}
    .pass{color:green;font-weight:bold}
    .fail{color:red;font-weight:bold}
  </style>
</head>
<body>
<h1>KẾT QUẢ HỌC TẬP</h1><div id="content"></div><script>
const semesters = [
  {
    name:"HK1 (2023 - 2024)",
    subjects:[
      {name:"Nhập môn công tác kỹ sư", lt:[7,7.5,8], th:[null,null,null], mid:7, fin:8},
      {name:"Toán cao cấp 1", lt:[6,6.5,6], th:[null,null,null], mid:6, fin:6.5},
      {name:"Giáo dục thể chất 1", lt:[8,8,8], th:[null,null,null], mid:8, fin:8},
      {name:"Triết học Mác - Lênin", lt:[6.5,6.5,6.5], th:[null,null,null], mid:6.5, fin:6},
      {name:"GDQP-AN", lt:[7,7,7], th:[null,null,null], mid:7, fin:7}
    ]
  },
  {
    name:"HK2 (2023 - 2024)",
    subjects:[
      {name:"Pháp luật đại cương", lt:[7,7,7.5], th:[null,null,null], mid:7, fin:7.5},
      {name:"Kỹ năng làm việc nhóm", lt:[8,8,8], th:[null,null,null], mid:8, fin:8},
      {name:"Toán cao cấp 2", lt:[6,6,6], th:[null,null,null], mid:6, fin:6},
      {name:"Giáo dục thể chất 2", lt:[8,8,8], th:[null,null,null], mid:8, fin:8},
      {name:"Kinh tế chính trị M-L", lt:[6.5,6.5,6], th:[null,null,null], mid:6.5, fin:6},
      {name:"Tiếng Anh 1", lt:[6,6.5,6.5], th:[null,null,null], mid:6.5, fin:6.5},
      {name:"Ứng dụng 5S & Kaizen", lt:[7,7,7], th:[null,null,null], mid:7, fin:7}
    ]
  },
  {
    name:"HK1 (2024 - 2025)",
    subjects:[
      {name:"Kỹ thuật xung số", lt:[6,6,6], th:[5.5,6,6], mid:6, fin:6},
      {name:"Mạch điện nâng cao", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Mạch điện tử", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"CNXH khoa học", lt:[7,7,7], th:[null,null,null], mid:7, fin:7},
      {name:"Lịch sử ĐCSVN", lt:[7,7,7], th:[null,null,null], mid:7, fin:7},
      {name:"Tiếng Anh 2", lt:[6,6,6], th:[null,null,null], mid:6, fin:6}
    ]
  },
  {
    name:"HK2 (2024 - 2025)",
    subjects:[
      {name:"Toán chuyên đề", lt:[6,6,6], th:[null,null,null], mid:6, fin:6},
      {name:"Trường điện từ", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Điện tử công suất", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Khí cụ điện", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Mạch điện", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Máy điện", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Kỹ thuật đo", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Kỹ thuật an toàn", lt:[7,7,7], th:[null,null,null], mid:7, fin:7}
    ]
  },
  {
    name:"HK3 (2024 - 2025)",
    subjects:[
      {name:"Cung cấp điện", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"CNTT trong chuyển đổi số", lt:[7,7,7], th:[null,null,null], mid:7, fin:7}
    ]
  },
  {
    name:"HK1 (2025 - 2026)",
    subjects:[
      {name:"Tư tưởng Hồ Chí Minh", lt:[7,7,7], th:[null,null,null], mid:7, fin:7},
      {name:"Kỹ thuật điều khiển tự động", lt:[5,5.5,5], th:[5,5.5,5], mid:4, fin:3},
      {name:"Ngôn ngữ lập trình C", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Hệ thống điện", lt:[6,6,6], th:[6,6,6], mid:6, fin:6},
      {name:"Phương pháp tính", lt:[6,6,6], th:[6,6,6], mid:6, fin:6}
    ]
  }
];

function avg(arr){
  const f = arr.filter(x=>x!==null);
  return f.reduce((a,b)=>a+b,0)/f.length;
}

const root = document.getElementById('content');

semesters.forEach(sem=>{
  let html = `<h2>${sem.name}</h2>`;
  html += `<table><tr>
    <th>STT</th><th>Môn học</th>
    <th>LT1</th><th>LT2</th><th>LT3</th>
    <th>TH1</th><th>TH2</th><th>TH3</th>
    <th>Giữa kỳ</th><th>Cuối kỳ</th>
    <th>Điểm TB</th><th>Đánh giá</th>
  </tr>`;

  let total=0;
  sem.subjects.forEach((s,i)=>{
    const tb = (avg(s.lt)+avg(s.th.filter(x=>x!==null).length? s.th:[avg(s.lt)]) + s.mid + s.fin)/4;
    const pass = tb>=4;
    total+=tb;
    html+=`<tr>
      <td>${i+1}</td><td class="left">${s.name}</td>
      ${s.lt.map(x=>`<td>${x??"-"}</td>`).join('')}
      ${s.th.map(x=>`<td>${x??"-"}</td>`).join('')}
      <td>${s.mid}</td><td>${s.fin}</td>
      <td>${tb.toFixed(1)}</td>
      <td class="${pass?'pass':'fail'}">${pass?'Đạt':'Học lại'}</td>
    </tr>`;
  });

  const gpa10 = total/sem.subjects.length;
  const gpa4 = Math.min(3.2,Math.max(2.5,gpa10/10*4));

  html+=`</table>
  <div class="summary">
    Điểm TB học kỳ hệ 10: ${gpa10.toFixed(2)}<br>
    Điểm TB học kỳ hệ 4: ${gpa4.toFixed(2)}<br>
    Xếp loại học lực học kỳ: ${gpa4>=3?'Khá':'Trung bình'}
  </div>`;

  root.innerHTML+=html;
});
</script></body>
</html>
