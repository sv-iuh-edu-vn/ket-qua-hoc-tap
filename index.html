<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Kết quả học tập</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f6fa;
    margin: 0;
    padding: 20px;
}
.header {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
}
.header img {
    height: 60px;
    margin-right: 15px;
}
h1 {
    color: #1e3799;
}
h2 {
    color: #273c75;
}
table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    margin-bottom: 15px;
}
th, td {
    border: 1px solid #ccc;
    padding: 6px;
    text-align: center;
}
th {
    background: #dcdde1;
}
.summary {
    background: #ffffff;
    padding: 10px;
    border: 1px solid #ccc;
    margin-bottom: 30px;
}
</style>
</head>
<body>

<div class="header">
    <img src="logo-iuh.png" alt="IUH Logo">
    <h1>KẾT QUẢ HỌC TẬP</h1>
</div>

<div id="content"></div>

<script>
function rand(min, max) {
    return (Math.random() * (max - min) + min).toFixed(2);
}

function xepLoai(final) {
    if (final < 6.5) return "C";
    if (final < 8) return "B";
    if (final < 9.5) return "A";
    return "A+";
}

function taoHocKy(tenHK, monHoc) {
    let html = `<h2>${tenHK}</h2>`;
    html += `
    <table>
        <tr>
            <th>STT</th>
            <th>Tên môn</th>
            <th>Tín chỉ</th>
            <th>LT</th>
            <th>TH</th>
            <th>Giữa kỳ</th>
            <th>Cuối kỳ</th>
            <th>Điểm tổng</th>
            <th>Xếp loại</th>
        </tr>
    `;

    let tongDiem4 = 0;
    let tongTC = 0;

    monHoc.forEach((mon, i) => {
        let lt = rand(6.5, 9);
        let th = rand(6.5, 9);
        let gk = rand(6.5, 9);
        let ck = rand(6.6, 9.5);

        let tong = (
            lt*0.1 +
            th*0.1 +
            gk*0.3 +
            ck*0.5
        ).toFixed(2);

        let he4 = (ck >= 8.5 ? 4 : ck >= 7 ? 3 : 2.5);
        tongDiem4 += he4 * mon.tc;
        tongTC += mon.tc;

        html += `
        <tr>
            <td>${i+1}</td>
            <td>${mon.ten}</td>
            <td>${mon.tc}</td>
            <td>${lt}</td>
            <td>${th}</td>
            <td>${gk}</td>
            <td>${ck}</td>
            <td>${tong}</td>
            <td>${xepLoai(ck)}</td>
        </tr>
        `;
    });

    let gpa = (tongDiem4 / tongTC).toFixed(2);
    if (gpa < 2.5) gpa = (2.6 + Math.random()*0.4).toFixed(2);

    html += `</table>
    <div class="summary">
        <b>Điểm trung bình học kỳ (hệ 4):</b> ${gpa}<br>
        <b>Tổng số tín chỉ:</b> ${tongTC}<br>
        <b>Xếp loại học lực:</b> ${gpa >= 3.2 ? "Giỏi" : gpa >= 2.5 ? "Khá" : "Trung bình"}
    </div>
    `;

    return html;
}

document.getElementById("content").innerHTML =
    taoHocKy("HK1 (2024–2025)", [
        {ten:"Kỹ thuật xung số", tc:3},
        {ten:"Mạch điện năng cao", tc:3},
        {ten:"Mạch điện tử", tc:2}
    ]) +
    taoHocKy("HK2 (2024–2025)", [
        {ten:"Toán chuyên đề", tc:2},
        {ten:"Khí cụ điện", tc:3},
        {ten:"Điện tử công suất", tc:3}
    ]);
</script>

</body>
</html>
