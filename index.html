<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω k·∫øt qu·∫£ h·ªçc t·∫≠p</title>
<style>
body { font-family: Arial, sans-serif; background:#f5f6fa; padding:20px }
h2 { background:#2d98da; color:white; padding:8px }
table { width:100%; border-collapse:collapse; margin-bottom:20px; background:white }
th, td { border:1px solid #ccc; padding:6px; text-align:center }
th { background:#dff9fb }
.summary { background:#f1f2f6; padding:10px; margin-bottom:30px }
.pass { color:green; font-weight:bold }
.fail { color:red; font-weight:bold }
input { width:50px }
</style>
</head>
<body>

<h1>üìò B·∫£ng k·∫øt qu·∫£ h·ªçc t·∫≠p</h1>

<div id="app"></div>

<script>
const semesters = [
{
  name:"HK1 (2023-2024)",
  courses:[
    ["Nh·∫≠p m√¥n c√¥ng t√°c k·ªπ s∆∞",2],
    ["To√°n cao c·∫•p 1",3],
    ["Gi√°o d·ª•c th·ªÉ ch·∫•t 1",1],
    ["Tri·∫øt h·ªçc M√°c - L√™nin",3],
    ["Gi√°o d·ª•c Qu·ªëc ph√≤ng v√† An ninh",3],
  ]
},
{
  name:"HK2 (2023-2024)",
  courses:[
    ["Ph√°p lu·∫≠t ƒë·∫°i c∆∞∆°ng",2],
    ["K·ªπ nƒÉng l√†m vi·ªác nh√≥m",2],
    ["To√°n cao c·∫•p 2",3],
    ["Gi√°o d·ª•c th·ªÉ ch·∫•t 2",1],
    ["Kinh t·∫ø ch√≠nh tr·ªã M√°c - L√™nin",3],
    ["Ti·∫øng Anh 1",3],
    ["·ª®ng d·ª•ng 5S v√† Kaizen trong s·∫£n xu·∫•t",2],
  ]
},
{
  name:"HK1 (2024-2025)",
  courses:[
    ["K·ªπ thu·∫≠t xung s·ªë",3],
    ["M·∫°ch ƒëi·ªán n√¢ng cao",3],
    ["M·∫°ch ƒëi·ªán t·ª≠",3],
    ["Ch·ªß nghƒ©a x√£ h·ªôi khoa h·ªçc",2],
    ["L·ªãch s·ª≠ ƒê·∫£ng C·ªông s·∫£n Vi·ªát Nam",2],
    ["Ti·∫øng Anh 2",3],
  ]
},
{
  name:"HK2 (2024-2025)",
  courses:[
    ["To√°n chuy√™n ƒë·ªÅ",3],
    ["Tr∆∞·ªùng ƒëi·ªán t·ª´",3],
    ["ƒêi·ªán t·ª≠ c√¥ng su·∫•t",3],
    ["Kh√≠ c·ª• ƒëi·ªán",3],
    ["M·∫°ch ƒëi·ªán",3],
    ["M√°y ƒëi·ªán",3],
    ["K·ªπ thu·∫≠t ƒëo",2],
    ["K·ªπ thu·∫≠t an to√†n",2],
  ]
},
{
  name:"HK3 (2024-2025)",
  courses:[
    ["Cung c·∫•p ƒëi·ªán",3],
    ["C√¥ng ngh·ªá th√¥ng tin trong chuy·ªÉn ƒë·ªïi s·ªë",2],
  ]
},
{
  name:"HK1 (2025-2026)",
  courses:[
    ["T∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh",2],
    ["K·ªπ thu·∫≠t ƒëi·ªÅu khi·ªÉn t·ª± ƒë·ªông",3],
    ["Ng√¥n ng·ªØ l·∫≠p tr√¨nh C",3],
    ["H·ªá th·ªëng ƒëi·ªán",3],
    ["Ph∆∞∆°ng ph√°p t√≠nh",3],
  ]
}
];

function grade10(x){
  if(x<4) return "F";
  if(x<5.5) return "D";
  if(x<6.5) return "C";
  if(x<8) return "B";
  return "A";
}
function grade4(x){
  if(x<4) return 0;
  if(x<5.5) return 1;
  if(x<6.5) return 2;
  if(x<8) return 3;
  return 4;
}

const app=document.getElementById("app");

semesters.forEach((s,si)=>{
  let html=`<h2>${s.name}</h2>
  <table>
  <tr>
    <th>M√¥n</th><th>TC</th>
    <th>LT1</th><th>LT2</th><th>LT3</th>
    <th>TH1</th><th>TH2</th><th>TH3</th>
    <th>H·ªá 10</th><th>H·ªá 4</th>
    <th>Ch·ªØ</th><th>KQ</th>
  </tr>`;
  s.courses.forEach((c,ci)=>{
    html+=`<tr>
      <td>${c[0]}</td>
      <td>${c[1]}</td>
      ${"<td><input type='number' min='0' max='10'></td>".repeat(6)}
      <td class="d10">0</td>
      <td class="d4">0</td>
      <td class="dc">F</td>
      <td class="rs fail">H·ªçc l·∫°i</td>
    </tr>`;
  });
  html+=`</table>
  <div class="summary">
    <b>ƒêi·ªÉm TB h·ªçc k·ª≥ (h·ªá 10):</b> <span class="tb10">0</span> |
    <b>H·ªá 4:</b> <span class="tb4">0</span>
  </div>`;
  app.innerHTML+=html;
});

document.querySelectorAll("input").forEach(inp=>{
  inp.oninput=()=>calc();
});

function calc(){
  document.querySelectorAll("table").forEach(tb=>{
    let sum10=0,sum4=0,tc=0;
    tb.querySelectorAll("tr").forEach((r,i)=>{
      if(i===0) return;
      let tds=r.querySelectorAll("td");
      let credits=+tds[1].innerText;
      let vals=[...r.querySelectorAll("input")].map(i=>+i.value||0);
      let avg=vals.reduce((a,b)=>a+b,0)/vals.length;
      let g10=avg.toFixed(2);
      let g4=grade4(avg);
      let gC=grade10(avg);
      tds[8].innerText=g10;
      tds[9].innerText=g4;
      tds[10].innerText=gC;
      let pass=avg>=4;
      tds[11].innerText=pass?"ƒê·∫°t":"H·ªçc l·∫°i";
      tds[11].className=pass?"pass":"fail";
      if(pass){
        sum10+=avg*credits;
        sum4+=g4*credits;
        tc+=credits;
      }
    });
    let tb10=tc?(sum10/tc).toFixed(2):0;
    let tb4=tc?(sum4/tc).toFixed(2):0;
    tb.nextElementSibling.querySelector(".tb10").innerText=tb10;
    tb.nextElementSibling.querySelector(".tb4").innerText=tb4;
  });
}
</script>
</body>
</html>
