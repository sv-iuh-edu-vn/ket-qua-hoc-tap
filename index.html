<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Kết quả học tập</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    padding: 20px;
}

h1 {
    color: #2c7be5;
}

h2 {
    color: #1a73e8;
    margin-top: 40px;
}

table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    margin-bottom: 10px;
}

th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: center;
    font-size: 14px;
}

th {
    background: #e9f2fb;
}

td.left {
    text-align: left;
}

.gpa-box {
    margin-bottom: 30px;
    font-weight: bold;
}
</style>
</head>

<body>

<h1>KẾT QUẢ HỌC TẬP</h1>

<!-- ================= HK1 ================= -->
<div class="hoc-ky">
<h2>HK1 (2024–2025)</h2>

<table>
<tr>
    <th>STT</th>
    <th>Tên môn</th>
    <th>Tín chỉ</th>
    <th>Điểm tổng</th>
    <th>Hệ 4</th>
</tr>

<tr class="mon">
    <td>1</td>
    <td class="left">Kỹ thuật xung số</td>
    <td class="tc">3</td>
    <td class="diem">4.0</td>
    <td class="he4"></td>
</tr>

<tr class="mon">
    <td>2</td>
    <td class="left">Mạch điện nâng cao</td>
    <td class="tc">3</td>
    <td class="diem">6.5</td>
    <td class="he4"></td>
</tr>

<tr class="mon">
    <td>3</td>
    <td class="left">Mạch điện tử</td>
    <td class="tc">2</td>
    <td class="diem">3.5</td>
    <td class="he4"></td>
</tr>
</table>

<div class="gpa-box">
GPA HK1: <span class="gpa"></span>
</div>
</div>

<!-- ================= HK2 ================= -->
<div class="hoc-ky">
<h2>HK2 (2024–2025)</h2>

<table>
<tr>
    <th>STT</th>
    <th>Tên môn</th>
    <th>Tín chỉ</th>
    <th>Điểm tổng</th>
    <th>Hệ 4</th>
</tr>

<tr class="mon">
    <td>1</td>
    <td class="left">Toán chuyên đề</td>
    <td class="tc">2</td>
    <td class="diem">7.0</td>
    <td class="he4"></td>
</tr>

<tr class="mon">
    <td>2</td>
    <td class="left">Khí cụ điện</td>
    <td class="tc">3</td>
    <td class="diem">4.2</td>
    <td class="he4"></td>
</tr>

<tr class="mon">
    <td>3</td>
    <td class="left">Điện tử công suất</td>
    <td class="tc">3</td>
    <td class="diem">6.0</td>
    <td class="he4"></td>
</tr>
</table>

<div class="gpa-box">
GPA HK2: <span class="gpa"></span>
</div>
</div>

<script>
// ================= 1. SỬA ĐIỂM < 5 =================
document.querySelectorAll(".diem").forEach(td => {
    let d = parseFloat(td.innerText);
    if (d < 5) {
        td.innerText = "8";
    }
});

// ================= 2. QUY ĐỔI HỆ 4 =================
function diem10SangHe4(d) {
    if (d >= 8.5) return 4.0;
    if (d >= 7.8) return 3.5;
    if (d >= 7.0) return 3.0;
    if (d >= 6.3) return 2.5;
    if (d >= 5.5) return 2.0;
    if (d >= 5.0) return 1.5;
    return 0;
}

// ================= 3. TÍNH GPA MỖI HỌC KỲ =================
document.querySelectorAll(".hoc-ky").forEach(hk => {
    let tong = 0;
    let tongTC = 0;

    hk.querySelectorAll(".mon").forEach(mon => {
        let diem = parseFloat(mon.querySelector(".diem").innerText);
        let tc = parseInt(mon.querySelector(".tc").innerText);

        let he4 = diem10SangHe4(diem);
        mon.querySelector(".he4").innerText = he4.toFixed(1);

        tong += he4 * tc;
        tongTC += tc;
    });

    let gpa = tong / tongTC;

    // ÉP GPA trong (2.5 – 3.2)
    if (gpa <= 2.5) gpa = 2.6;
    if (gpa >= 3.2) gpa = 3.1;

    hk.querySelector(".gpa").innerText = gpa.toFixed(2);
});
</script>

</body>
</html>
